<br/>

>[!WARNING|style: flat|label: 简要说明]
>
>- <span style='color:Blue'>[ 工作队列`Work Queues`]</span> 支持多个消费者(`Consumer`)
>
>   <span style='color:red'>[ 竞争消费：针对同一个队列，各个消费者将对同一条消息是竞争关系 - 谁先抢到该消息谁就处理 ]</span>
>
>   [<span style='color:#008B00'>[👓 官方说明 ]</span>](https://www.rabbitmq.com/tutorials#2-work-queues ':target=_blank')
>
>
> ![image-20250923211208379](wwwroot\docImages\image-20250923211208379.png)
>
>⚠<span style='color:red'>[ 此模式使用默认交换机`Default Exchange`：默认交换机的名称是空字符串，它是一个直连交换机 ]</span>
>
><br/>

<!-- tabs:start -->

#### **[ C# ]Producer**

```csharp
IConnection conn = await factory.CreateConnectionAsync(endpoints);
DefaultObjectPool<IChannel> pool = new DefaultObjectPool<IChannel>(new ChannelPooledObjectPolicy(conn));
for (int i = 0; i < 10; i++)
{

     IChannel channel = pool.Get();
     try
     {
          // [ 声明队列 ] Q1
          await channel.QueueDeclareAsync("Q1", durable: true, exclusive: false, autoDelete: false, arguments: null);

          // [ 发布消息 ]
          string message = $"Hello World! {i}";
          ReadOnlyMemory<byte> body = System.Text.Encoding.UTF8.GetBytes(message);
          
          var properties = new BasicProperties
          {
               Persistent = true,
               ContentType = "text/plain",
               ContentEncoding = "utf-8",

               MessageId = Guid.CreateVersion7().ToString("N"),
               CorrelationId = "0201-03",
               Timestamp = new AmqpTimestamp(DateTimeOffset.UtcNow.ToUnixTimeSeconds()),
               AppId = "TConsoleApp",
               Type = "Test"
          };
          await channel.BasicPublishAsync(exchange: "", routingKey: "Q1", false, basicProperties: properties, body: body);
          Console.WriteLine(" 已发送消息: {0}", message);
         
     }
     finally
     {
          pool.Return(channel);
     }
     await Task.Delay(500);

}


```





#### **[ C# ]Consumer**



#### **Tab3**



<!-- tabs:end -->
