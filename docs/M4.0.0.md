<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜]
>
>- <span style='color:Blue'>[ è·¯ç”±æ¨¡å¼`Routing`]</span> é€šè¿‡è·¯ç”±ç»‘å®šçš„æ–¹å¼ <span style='color:red'>[ äº¤æ¢æœº(`Exchange`ï¼‰+ é˜Ÿåˆ—(`Queue`)ï¼šé€šè¿‡è·¯ç”±é”®`Routing.Key`è¿›è¡Œç»‘å®š - å®ç°æ¶ˆæ¯çš„å®šå‘åˆ†å‘ ]</span>
>
>   <span style='color:red'>[ ç”Ÿäº§è€…åœ¨å‘é€æ¶ˆæ¯æ—¶ï¼Œéœ€åŒæ—¶æŒ‡å®šäº¤æ¢æœº + è·¯ç”±é”® - ç¡®ä¿æ¶ˆæ¯èƒ½è¢«æ­£ç¡®è·¯ç”±åˆ°ç›®æ ‡é˜Ÿåˆ— ]</span>
>
>   <span style='color:red'>[ ç«äº‰æ¶ˆè´¹ï¼šé’ˆå¯¹åŒä¸€ä¸ªé˜Ÿåˆ—ï¼Œå„ä¸ªæ¶ˆè´¹è€…å°†å¯¹åŒä¸€æ¡æ¶ˆæ¯æ˜¯ç«äº‰å…³ç³» - è°å…ˆæŠ¢åˆ°è¯¥æ¶ˆæ¯è°å°±å¤„ç† ]</span>
>
>   [<span style='color:#008B00'>[ğŸ‘“ å®˜æ–¹è¯´æ˜ ]</span>](https://www.rabbitmq.com/tutorials#3-publishsubscribe ':target=_blank')
>
>   ![image-20250923225240886](wwwroot\docImages\image-20250923225240886.png)
>
>
>âš <span style='color:red'>[ æ­¤æ¨¡å¼ä½¿ç”¨ç›´è¿äº¤æ¢æœº`Direct Exchangee`ï¼šé€šè¿‡è·¯ç”±é”®`Routing Key`å®ç°æ¶ˆæ¯çš„å®šå‘åˆ†å‘ ]</span>
>
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color:red'>[Â å¯ä»¥ä½¿ç”¨ç›¸åŒçš„è·¯ç”±é”®ï¼šåŒæ—¶å°†`N`ä¸ªé˜Ÿåˆ—ç»‘å®šåˆ°åŒä¸€ä¸ªäº¤æ¢æœº - æ¨¡æ‹Ÿæ¶ˆæ¯å¹¿æ’­ ]</span>
>
>âš <span style='color:red'>[`Exchange`åªè´Ÿè´£æ¶ˆæ¯çš„è·¯ç”±å’Œè½¬å‘ï¼Œä¸å…·å¤‡å­˜å‚¨æ¶ˆæ¯çš„èƒ½åŠ› ]</span>
>
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color:red'>[ å¦‚æœæ²¡æœ‰é˜Ÿåˆ—ç»‘å®šåˆ°äº¤æ¢æœºï¼Œäº¤æ¢æœºæ”¶åˆ°æ¶ˆæ¯åæ— æ³•è½¬å‘åˆ°ä»»ä½•é˜Ÿåˆ—ï¼Œè¿™äº›æ¶ˆæ¯ä¼šè¢«ç›´æ¥ä¸¢å¼ƒï¼Œæ— æ³•è¢«ä»»ä½•æ¶ˆè´¹è€…æ¥æ”¶ ]</span>
>
><br/>

```csharp
async Task M1(IConnection conn, CancellationToken token)
{

     for (int i = 0; i < 10; i++)
     {

          IChannel channel = pool.Get();
          try
          {
               // [ A.1 ] å£°æ˜é˜Ÿåˆ—  Q1
               await channel.QueueDeclareAsync("Q1", durable: true, exclusive: false, autoDelete: false, arguments: null);
               // [ A.2 ] å£°æ˜é˜Ÿåˆ—  Q2
               await channel.QueueDeclareAsync("Q2", durable: true, exclusive: false, autoDelete: false, arguments: null);
               // [ A.3 ] å£°æ˜é˜Ÿåˆ—  Q3
               await channel.QueueDeclareAsync("Q3", durable: true, exclusive: false, autoDelete: false, arguments: null);
              
               // [ B ] å£°æ˜äº¤æ¢æœº Direct
               await channel.ExchangeDeclareAsync("E2", ExchangeType.Direct);
               // [ C ] è·¯ç”±ç»‘å®š
               await channel.QueueBindAsync(queue: "Q1", exchange: "E2", routingKey: "Email");
               await channel.QueueBindAsync(queue: "Q2", exchange: "E2", routingKey: "Email");
               await channel.QueueBindAsync(queue: "Q3", exchange: "E2", routingKey: "QQ");

               // [ å‘å¸ƒæ¶ˆæ¯ ]
               string message = $"Hello World! {i}";
               ReadOnlyMemory<byte> body = System.Text.Encoding.UTF8.GetBytes(message);

               var properties = new BasicProperties
               {
                    Persistent = true,
                    ContentType = "text/plain",
                    ContentEncoding = "utf-8",

                    MessageId = Guid.CreateVersion7().ToString("N"),
                    CorrelationId = "0201-03",
                    Timestamp = new AmqpTimestamp(DateTimeOffset.UtcNow.ToUnixTimeSeconds()),
                    AppId = "TConsoleApp",
                    Type = "Test"
               };
               await channel.BasicPublishAsync(exchange: "E2", routingKey: "Email", false, basicProperties: properties, body: body);
               Console.WriteLine(" å·²å‘é€æ¶ˆæ¯: {0}", message);

          }
          finally
          {
               pool.Return(channel);
          }
          await Task.Delay(3000);

     }

}


```

